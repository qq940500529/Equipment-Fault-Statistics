# 贡献指南

感谢您考虑为设备故障统计系统做出贡献！本指南将帮助您了解如何参与项目开发。

## 行为准则

参与本项目前，请先阅读我们的 [行为准则](https://github.com/qq940500529/Equipment-Fault-Statistics/blob/main/CODE_OF_CONDUCT.md)。我们期待所有贡献者：

- 尊重他人
- 建设性沟通
- 专注于对项目最有利的事情
- 展示同理心

## 如何贡献

### 报告Bug 🐛

发现bug？请帮助我们改进！

1. **搜索现有Issue**: 检查是否已有人报告了类似问题
2. **创建新Issue**: 使用 [Bug报告模板](https://github.com/qq940500529/Equipment-Fault-Statistics/issues/new?template=bug_report.md)
3. **提供详细信息**:
   - 清晰的问题描述
   - 复现步骤
   - 预期行为 vs 实际行为
   - 环境信息（浏览器、操作系统等）
   - 截图或错误信息

**示例Bug报告**:
```markdown
### 问题描述
上传大于10MB的Excel文件时，页面无响应

### 复现步骤
1. 打开应用
2. 选择20MB的Excel文件
3. 点击上传按钮
4. 等待超过1分钟

### 预期行为
文件应该成功上传并显示进度

### 实际行为
页面冻结，无任何响应

### 环境
- 浏览器: Chrome 120.0.0
- 操作系统: Windows 11
- 文件大小: 20MB
```

### 建议新功能 💡

有好的想法？我们很乐意听取！

1. **创建Feature Request**: 使用 [功能请求模板](https://github.com/qq940500529/Equipment-Fault-Statistics/issues/new?template=feature_request.md)
2. **描述功能**:
   - 功能的目的和使用场景
   - 建议的实现方式
   - 可能的替代方案
   - 相关的截图或示意图

### 改进文档 📖

文档同样重要！

1. **创建Documentation Issue**: 使用 [文档改进模板](https://github.com/qq940500529/Equipment-Fault-Statistics/issues/new?template=documentation.md)
2. **或直接提交PR**: 修复拼写错误、改进说明等

## 开发流程

### 1. Fork仓库

在GitHub上点击"Fork"按钮，创建您自己的副本。

```bash
# 克隆您的Fork
git clone https://github.com/YOUR_USERNAME/Equipment-Fault-Statistics.git
cd Equipment-Fault-Statistics
```

### 2. 设置开发环境

```bash
# 添加上游仓库
git remote add upstream https://github.com/qq940500529/Equipment-Fault-Statistics.git

# 安装依赖（如果有）
npm install
```

### 3. 创建功能分支

```bash
# 从main分支创建新分支
git checkout -b feature/your-feature-name

# 或修复bug
git checkout -b fix/bug-description
```

**分支命名规范**:
- `feature/` - 新功能
- `fix/` - Bug修复
- `docs/` - 文档更新
- `refactor/` - 代码重构
- `test/` - 测试相关
- `chore/` - 构建或辅助工具

### 4. 进行开发

#### 代码风格

**JavaScript**:
```javascript
// ✅ 推荐
function calculateTime(start, end) {
  const diff = end - start;
  return diff / (1000 * 60 * 60);
}

// ❌ 不推荐
function calc(s,e){
    return (e-s)/(1000*60*60)
}
```

**编码规范**:
- 使用ES6+语法
- 2个空格缩进
- 使用单引号
- 文件末尾保留空行
- 每行最多120个字符
- 使用分号结尾

**命名规范**:
- 变量和函数: `camelCase`
- 类名: `PascalCase`
- 常量: `UPPER_SNAKE_CASE`
- 文件名: `kebab-case.js`

#### 注释规范

```javascript
/**
 * 计算两个日期之间的小时差
 * @param {Date} startDate - 开始时间
 * @param {Date} endDate - 结束时间
 * @returns {number} 小时差（保留2位小数）
 */
function getHoursDifference(startDate, endDate) {
  const diff = endDate - startDate;
  const hours = diff / (1000 * 60 * 60);
  return Math.round(hours * 100) / 100;
}
```

### 5. 测试您的更改

```bash
# 运行测试
npm test

# 运行特定测试
npm test -- fileUploader.test.js

# 查看测试覆盖率
npm test -- --coverage
```

**测试要求**:
- 为新功能添加测试
- 确保所有现有测试通过
- 测试覆盖率 > 80%
- 在多个浏览器中测试

### 6. 提交更改

#### 提交消息规范

使用清晰、描述性的提交消息：

```bash
# 格式
<类型>: <简短描述>

[可选的详细说明]

[可选的关联Issue]
```

**提交类型**:
- `feat`: 新功能
- `fix`: Bug修复
- `docs`: 文档更新
- `style`: 代码格式调整
- `refactor`: 代码重构
- `test`: 添加测试
- `chore`: 构建或辅助工具变更

**示例**:
```bash
git add .
git commit -m "feat: 添加CSV导出功能

- 实现CSV格式转换
- 添加UTF-8 BOM支持
- 处理特殊字符转义

Closes #42"
```

### 7. 推送到您的Fork

```bash
git push origin feature/your-feature-name
```

### 8. 创建Pull Request

1. 访问原仓库
2. 点击"New Pull Request"
3. 选择您的分支
4. 填写PR模板
5. 提交PR

**PR标题格式**:
```
类型: 简短描述
```

**PR描述应包含**:
- 改动说明
- 关联的Issue
- 测试情况
- 截图（如果是UI改动）

## 代码审查

### 审查流程

1. **自动检查**: CI/CD会自动运行测试和检查
2. **维护者审查**: 项目维护者会审查您的代码
3. **反馈处理**: 根据审查意见修改代码
4. **合并**: 审查通过后合并到主分支

### 常见审查意见

- **代码质量**: 改进代码结构和可读性
- **测试覆盖**: 添加或改进测试
- **文档**: 补充或更新文档
- **性能**: 优化性能问题
- **安全**: 修复安全隐患

### 处理审查反馈

```bash
# 在您的功能分支上进行修改
git add .
git commit -m "fix: 根据审查意见修改代码"
git push origin feature/your-feature-name
```

PR会自动更新！

## 开发建议

### 本地测试

```bash
# 启动本地服务器
python -m http.server 8000

# 访问
open http://localhost:8000
```

### 调试技巧

**浏览器开发者工具**:
- Console: 查看日志和错误
- Network: 检查网络请求
- Sources: 调试JavaScript代码
- Performance: 分析性能问题

**常用调试代码**:
```javascript
// 打印变量
console.log('data:', data);

// 打印对象
console.table(dataArray);

// 性能测试
console.time('processData');
processData();
console.timeEnd('processData');
```

### 常见问题

**Q: 如何同步上游更改？**
```bash
git fetch upstream
git checkout main
git merge upstream/main
git push origin main
```

**Q: 如何解决合并冲突？**
```bash
# 1. 同步上游
git fetch upstream
git merge upstream/main

# 2. 解决冲突（编辑冲突文件）
# 3. 标记已解决
git add .
git commit -m "fix: 解决合并冲突"
git push origin feature/your-feature-name
```

**Q: 提交了错误的内容怎么办？**
```bash
# 撤销最后一次提交（保留更改）
git reset --soft HEAD~1

# 修改后重新提交
git add .
git commit -m "fix: 正确的提交消息"
```

## 项目结构

了解项目结构有助于找到正确的文件位置：

```
Equipment-Fault-Statistics/
├── .github/              # GitHub配置
│   ├── ISSUE_TEMPLATE/  # Issue模板
│   └── workflows/       # GitHub Actions
├── css/                 # 样式文件
├── js/                  # JavaScript代码
│   ├── modules/        # 业务逻辑模块
│   ├── utils/          # 工具函数
│   └── config/         # 配置文件
├── lib/                # 第三方库
├── docs/               # 文档
├── tests/              # 测试文件
└── examples/           # 示例文件
```

## 开发阶段

当前项目处于 **Phase 5** - 数据导出阶段

**优先贡献领域**:
- ✅ Phase 1-4: 已完成
- 🔄 Phase 5: 数据导出（当前）
- 📋 Phase 6-7: 数据可视化
- 📋 Phase 8-9: 测试与优化

详见 [开发指南](开发指南)

## 获取帮助

遇到问题？以下资源可以帮助您：

- 📖 查看 [文档](https://github.com/qq940500529/Equipment-Fault-Statistics/tree/main/docs)
- 💬 使用 [Discussions](https://github.com/qq940500529/Equipment-Fault-Statistics/discussions) 提问
- 🐛 报告 [Issues](https://github.com/qq940500529/Equipment-Fault-Statistics/issues)
- 📧 联系维护者

## 致谢

感谢所有贡献者！您的贡献让这个项目变得更好。

### 贡献者名单

贡献者会在项目README中列出。

### 表彰

- ⭐ Star项目
- 📢 分享项目
- 💬 参与讨论
- 🐛 报告问题
- 💻 提交代码
- 📖 改进文档

每一份贡献都很重要！

## 许可证

贡献代码即表示您同意您的贡献将按照项目的 [MIT 许可证](https://github.com/qq940500529/Equipment-Fault-Statistics/blob/main/LICENSE) 进行许可。

---

再次感谢您的贡献！🎉

**相关资源**:
- [代码规范](代码规范) - 详细的编码标准
- [测试指南](测试指南) - 测试策略和示例
- [开发指南](开发指南) - 开发流程和计划
